{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import basestyle from\"./Base.module.css\";import loginstyle from\"./Login.module.css\";import axios from\"axios\";import{useNavigate,NavLink}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=_ref=>{let{setUserState}=_ref;const navigate=useNavigate();const[formErrors,setFormErrors]=useState({});const[isSubmit,setIsSubmit]=useState(false);const[user,setUserDetails]=useState({email:\"\",password:\"\"});const changeHandler=e=>{const{name,value}=e.target;setUserDetails({...user,[name]:value});};const validateForm=values=>{const error={};const regex=/^[^\\s+@]+@[^\\s@]+\\.[^\\s@]{2,}$/i;if(!values.email){error.email=\"Email is required\";}else if(!regex.test(values.email)){error.email=\"Please enter a valid email address\";}if(!values.password){error.password=\"Password is required\";}return error;};const loginHandler=async e=>{e.preventDefault();// setFormErrors(validateForm(user));\n// setIsSubmit(true);\n// if (!formErrors) {\n// }\ntry{const response=await fetch('http://localhost:9090/api/users/login',{method:'POST',body:JSON.stringify(user),headers:{'Content-Type':'application/json'}});const json=await response.json();if(!response.ok){console.log(\"not authenticated\");}if(response.ok){console.log(\"Login successful\");console.log(json);navigate('/');// redirect to login page or another page\n}}catch(error){console.error(\"Error:\",error);}};return/*#__PURE__*/_jsxs(\"div\",{className:loginstyle.login,children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:loginHandler,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",id:\"email\",placeholder:\"Email\",onChange:changeHandler,value:user.email}),/*#__PURE__*/_jsx(\"p\",{className:basestyle.error,children:formErrors.email}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",id:\"password\",placeholder:\"Password\",onChange:changeHandler,value:user.password}),/*#__PURE__*/_jsx(\"p\",{className:basestyle.error,children:formErrors.password}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:basestyle.button_common,children:\"Login\"})]}),/*#__PURE__*/_jsx(NavLink,{to:\"/signup\",children:\"Not yet registered? Register Now\"})]});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","basestyle","loginstyle","axios","useNavigate","NavLink","jsx","_jsx","jsxs","_jsxs","Login","_ref","setUserState","navigate","formErrors","setFormErrors","isSubmit","setIsSubmit","user","setUserDetails","email","password","changeHandler","e","name","value","target","validateForm","values","error","regex","test","loginHandler","preventDefault","response","fetch","method","body","JSON","stringify","headers","json","ok","console","log","className","login","children","onSubmit","type","id","placeholder","onChange","button_common","to"],"sources":["/workspaces/Krishak_Shayak/src/pages/login.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport basestyle from \"./Base.module.css\";\nimport loginstyle from \"./Login.module.css\";\nimport axios from \"axios\";\nimport { useNavigate, NavLink } from \"react-router-dom\";\nconst Login = ({ setUserState }) => {\n  const navigate = useNavigate();\n  const [formErrors, setFormErrors] = useState({});\n  const [isSubmit, setIsSubmit] = useState(false);\n  const [user, setUserDetails] = useState({\n    email: \"\",\n    password: \"\",\n  });\n\n  const changeHandler = (e) => {\n    const { name, value } = e.target;\n    setUserDetails({\n      ...user,\n      [name]: value,\n    });\n  };\n  const validateForm = (values) => {\n    const error = {};\n    const regex = /^[^\\s+@]+@[^\\s@]+\\.[^\\s@]{2,}$/i;\n    if (!values.email) {\n      error.email = \"Email is required\";\n    } else if (!regex.test(values.email)) {\n      error.email = \"Please enter a valid email address\";\n    }\n    if (!values.password) {\n      error.password = \"Password is required\";\n    }\n    return error;\n  };\n\n  const loginHandler =async (e) => {\n    e.preventDefault();\n    // setFormErrors(validateForm(user));\n    // setIsSubmit(true);\n    // if (!formErrors) {\n\n    // }\n\n    try {\n      const response = await fetch('http://localhost:9090/api/users/login', {\n        method: 'POST',\n        body: JSON.stringify(user),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      const json = await response.json();\n      if(!response.ok){\n        console.log(\"not authenticated\")\n      }\n      if (response.ok) {\n        console.log(\"Login successful\");\n        console.log(json);\n        navigate('/'); // redirect to login page or another page\n      } \n    } catch (error) {\n      console.error(\"Error:\", error);\n    }\n  };\n\n  \n  return (\n    <div className={loginstyle.login}>\n      <form onSubmit={loginHandler}>\n        <h1>Login</h1>\n        <input\n          type=\"email\"\n          name=\"email\"\n          id=\"email\"\n          placeholder=\"Email\"\n          onChange={changeHandler}\n          value={user.email}\n        />\n        <p className={basestyle.error}>{formErrors.email}</p>\n        <input\n          type=\"password\"\n          name=\"password\"\n          id=\"password\"\n          placeholder=\"Password\"\n          onChange={changeHandler}\n          value={user.password}\n        />\n        <p className={basestyle.error}>{formErrors.password}</p>\n        <button type=\"submit\" className={basestyle.button_common}>\n          Login\n        </button>\n      </form>\n\n      <NavLink to=\"/signup\">Not yet registered? Register Now</NavLink>\n    </div>\n  );\n};\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}